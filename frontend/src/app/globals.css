@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================== */
/* TOKENS – MODO CLARO   */
/* ===================== */
:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);

  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);

  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);

  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);

  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);

  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);

  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);

  --destructive: oklch(0.577 0.245 27.325);
  --destructive-foreground: oklch(0.577 0.245 27.325);

  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);

  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);

  --radius: 0.625rem;

  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);

  /* cor usada no halo/ring do hover do card */
  --ring-brand: oklch(0.72 0.14 270);
}

/* ===================== */
/* TOKENS – MODO ESCURO  */
/* ===================== */
.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);

  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);

  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);

  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);

  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);

  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);

  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);

  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);

  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);
  --ring: oklch(0.439 0 0);

  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);

  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

/* ===== Base ===== */
@layer base {
  * { @apply border-border; }
  body { @apply bg-background text-foreground; }
}

/* ===== Utilities ===== */
@layer utilities {
  /* Ícone com gradiente e glow no próprio hover do ícone */
  .icon-gradient {
    background: linear-gradient(90deg, #2BB1E8 0%, #4D58F0 50%, #A63F8E 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: all .3s ease;
  }
  .icon-glow:hover,
  .icon-glow:focus-visible {
    filter:
      drop-shadow(0 0 10px rgba(77,88,240,.6))
      drop-shadow(0 0 20px rgba(166,63,142,.4));
    transform: scale(1.15);
  }

  /* Glow leve reutilizável (para botões/inputs) */
  .glow-brand {
    transition: transform .25s ease, filter .25s ease, box-shadow .25s ease;
  }
  .glow-brand:hover,
  .glow-brand:focus,
  .glow-brand:focus-visible,
  .glow-brand:focus-within {
    transform: translateZ(0) scale(1.03);
    filter:
      drop-shadow(0 0 10px rgba(77,88,240,.45))
      drop-shadow(0 0 18px rgba(166,63,142,.35));
  }

  /* “Ring” sutil ao focar/hover */
  .ring-brand {
    box-shadow: 0 0 0 1px var(--border);
  }
  .ring-brand:hover,
  .ring-brand:focus,
  .ring-brand:focus-within {
    box-shadow:
      0 0 0 1px var(--ring-brand),
      0 0 0 4px color-mix(in oklab, var(--ring-brand) 30%, transparent),
      0 0 18px color-mix(in oklab, var(--ring-brand) 35%, transparent);
  }

  /* Fundo de “card glow” opcional (pode ser aplicado em overlays) */
  .card-glow {
    background:
      radial-gradient(55% 55% at 30% 10%, rgba(43,177,232,0.38) 0%, rgba(43,177,232,0) 60%),
      radial-gradient(50% 60% at 85% 85%, rgba(166,63,142,0.30) 0%, rgba(166,63,142,0) 60%),
      radial-gradient(55% 60% at 60% 50%, rgba(77,88,240,0.34) 0%, rgba(77,88,240,0) 65%);
  }

  /* Fade inferior na imagem para legibilidade do título */
  .card-image-fade {
    position: absolute;
    inset: auto 0 0 0;
    height: 58%;
    pointer-events: none;
    background: linear-gradient(
      180deg,
      rgba(0,0,0,0.00) 0%,
      rgba(0,0,0,0.32) 30%,
      rgba(0,0,0,0.80) 100%
    );
  }

  /* ============ HOVER GLOBAL DO CARD (usa .group no wrapper) ============ */

  /* Título normal; vira gradiente no hover do CARD */
  .on-card-hover-title {
    transition: color .25s ease, background .25s ease;
    color: inherit;
  }
  .group:hover .on-card-hover-title,
  .group:focus-within .on-card-hover-title {
    color: transparent;
    -webkit-background-clip: text;
    background-clip: text;
    background-image: linear-gradient(90deg, #2BB1E8 0%, #7C8CFF 46%, #A63F8E 100%);
  }

  /* Aurora por trás do conteúdo: oculta por padrão, aparece no hover do CARD */
  .aurora-surface {
    opacity: 0;
    transition: opacity .25s ease;
    background:
      radial-gradient(65% 70% at 20% 0%, rgba(43,177,232,0.22) 0%, rgba(43,177,232,0.0) 60%),
      radial-gradient(70% 80% at 90% 90%, rgba(166,63,142,0.18) 0%, rgba(166,63,142,0.0) 60%),
      radial-gradient(55% 50% at 65% 45%, rgba(77,88,240,0.16) 0%, rgba(77,88,240,0.0) 65%);
    filter: blur(0.0001px);
  }
  .group:hover .aurora-surface,
  .group:focus-within .aurora-surface {
    opacity: 0.95;
  }

  /* Ícones/elementos que devem brilhar quando o CARD é hover/focus-within */
  .on-card-hover-glow {
    transition: transform .25s ease, filter .25s ease, opacity .25s ease;
    opacity: .92;
  }
  .group:hover .on-card-hover-glow,
  .group:focus-within .on-card-hover-glow {
    filter:
      drop-shadow(0 0 10px rgba(77,88,240,.60))
      drop-shadow(0 0 20px rgba(166,63,142,.40));
    transform: scale(1.12);
    opacity: 1;
  }

  /* Halo/ring do próprio CARD no hover global */
  .on-card-hover-ring {
    transition: box-shadow .25s ease, transform .25s ease, filter .25s ease;
  }
  .group:hover.on-card-hover-ring,
  .group:focus-within.on-card-hover-ring {
    box-shadow:
      0 0 0 1px rgba(77,88,240,.45),
      0 0 0 4px rgba(77,88,240,.15),
      0 0 18px rgba(166,63,142,.25);
    transform: translateZ(0) scale(1.03);
    filter:
      drop-shadow(0 0 10px rgba(77,88,240,.45))
      drop-shadow(0 0 18px rgba(166,63,142,.35));
  }

  /* Zoom leve na imagem quando o CARD recebe hover */
  .group:hover .img-zoom-on-hover { transform: scale(1.03); }

  /* ===================== Skeleton com shimmer ===================== */
  @keyframes skeleton-shimmer { 100% { transform: translateX(100%); } }

  .skeleton-block {
    @apply relative h-full w-full rounded-xl;
    background: color-mix(in oklab, var(--muted) 70%, black 0%);
  }
  .dark .skeleton-block { background: color-mix(in oklab, var(--muted) 38%, white 0%); }
  .skeleton-block::after {
    content: "";
    position: absolute; inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.06), transparent);
    animation: skeleton-shimmer 1.2s infinite;
  }

  .skeleton-line {
    @apply relative rounded;
    background: color-mix(in oklab, var(--muted) 72%, black 0%);
  }
  .dark .skeleton-line { background: color-mix(in oklab, var(--muted) 45%, white 0%); }
  .skeleton-line::after {
    content: "";
    position: absolute; inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.06), transparent);
    animation: skeleton-shimmer 1.2s infinite;
  }

  .skeleton-dot {
    @apply h-1.5 w-1.5 rounded-full;
    background: color-mix(in oklab, var(--muted-foreground) 70%, black 0%);
  }

  .skeleton-circle {
    @apply relative rounded-full;
    background: color-mix(in oklab, var(--muted) 72%, black 0%);
  }
  .dark .skeleton-circle { background: color-mix(in oklab, var(--muted) 45%, white 0%); }
  .skeleton-circle::after {
    content: "";
    position: absolute; inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.06), transparent);
    animation: skeleton-shimmer 1.2s infinite;
  }
}

/* Imagem sempre preenchendo o container 16:9 */
.img-fill {
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
}
@layer utilities {
  /* Badge reage ao hover do CARD (wrapper .group) */
  .on-card-hover-badge {
    will-change: transform, filter, box-shadow, background;
    transition: transform .25s ease, filter .25s ease, box-shadow .25s ease, background .25s ease, color .25s ease;
  }

  .group:hover .on-card-hover-badge,
  .group:focus-within .on-card-hover-badge {
    color: #fff !important;
    background: linear-gradient(90deg,#2BB1E8 0%,#4D58F0 55%,#A63F8E 100%) !important;
    box-shadow:
      0 0 0 1px rgba(77,88,240,.45),
      0 6px 20px -6px rgba(77,88,240,.35),
      0 10px 26px -10px rgba(166,63,142,.30);
    filter:
      drop-shadow(0 0 8px rgba(77,88,240,.45))
      drop-shadow(0 0 14px rgba(166,63,142,.35));
    transform: translateZ(0) scale(1.04);
  }
}
@layer utilities {
  /* ==== Hover visível no LIGHT sem "lavar" o conteúdo ==== */
  .glow-card { position: relative; border-radius: 1rem; background: var(--card); }
  .glow-card > * { position: relative; z-index: 1; } /* conteúdo sempre acima */

  .glow-card::before {
    content: "";
    position: absolute;
    inset: -8px;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;                /* atrás do conteúdo */
    background: conic-gradient(from 0deg, #2BB1E8, #4D58F0, #A63F8E, #2BB1E8);
    filter: blur(24px);
    opacity: .42;              /* LIGHT: mais sutil para não “lavar” */
    transition: opacity .18s ease, filter .18s ease, transform .18s ease;
  }
  .glow-card:hover::before { opacity: .60; filter: blur(28px); }

  /* DARK: mantém presença forte, mas sempre por trás do conteúdo */
  .dark .glow-card::before { opacity: .88; filter: blur(20px); }

  /* Anel/realce no hover (usa seu token --ring-brand) */
  .glow-card:hover {
    box-shadow:
      0 0 0 1px var(--ring-brand),
      0 0 0 6px color-mix(in oklab, var(--ring-brand) 22%, transparent),
      0 14px 34px color-mix(in oklab, var(--ring-brand) 18%, transparent);
  }

  /* Se por acaso o card tiver .glow-hover em algum lugar, neutraliza */
  .glow-card.glow-hover::after { content: none !important; }
}
@layer utilities {
  /* 1) Hover forte VISÍVEL no LIGHT, sem lavar o conteúdo */
  .glow-card { position: relative; border-radius: 1rem; background: var(--card); }
  .glow-card > * { position: relative; z-index: 1; } /* conteúdo sempre acima */

  .glow-card::before {
    content: "";
    position: absolute;
    inset: -10px;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0; /* atrás do conteúdo */
    background: conic-gradient(from 0deg, #2BB1E8, #4D58F0, #A63F8E, #2BB1E8);
    filter: blur(26px);
    opacity: .60;                    /* LIGHT: MAIS visível */
    transition: opacity .18s ease, filter .18s ease, transform .18s ease;
  }
  .glow-card:hover::before { opacity: .78; filter: blur(30px); }

  /* DARK mantém presença forte (mas sempre atrás do conteúdo) */
  .dark .glow-card::before { opacity: .90; filter: blur(22px); }

  /* Anel de destaque no hover (usa seu token --ring-brand) */
  .glow-card:hover {
    box-shadow:
      0 0 0 1px var(--ring-brand),
      0 0 0 6px color-mix(in oklab, var(--ring-brand) 22%, transparent),
      0 18px 38px color-mix(in oklab, var(--ring-brand) 22%, transparent);
  }

  /* 2) Gradiente NO TÍTULO só no tema escuro (no light fica cor normal) */
  /* regra original existia sem .dark, por isso lavava o texto no light */
  .dark .group:hover .on-card-hover-title,
  .dark .group:focus-within .on-card-hover-title {
    color: transparent !important;
    -webkit-background-clip: text;
    background-clip: text;
    background-image: linear-gradient(90deg, #2BB1E8 0%, #7C8CFF 46%, #A63F8E 100%);
  }
  /* no LIGHT o título mantém a cor legível */
  .group:hover .on-card-hover-title,
  .group:focus-within .on-card-hover-title {
    color: var(--foreground) !important;
    background: none !important;
    -webkit-text-fill-color: currentColor !important;
  }

  /* 3) Se você usar a "aurora" dentro do card, garanta que ela fique ATRÁS */
  .aurora-surface {
    position: absolute;
    inset: 0;
    z-index: 0;          /* sempre atrás */
    pointer-events: none;
    mix-blend-mode: normal;
    opacity: 0;
    transition: opacity .25s ease, filter .25s ease;
  }
  /* LIGHT: bem mais sutil */
  .group:hover .aurora-surface,
  .group:focus-within .aurora-surface { opacity: .28; filter: blur(18px); }
  /* DARK: pode ser mais presente */
  .dark .group:hover .aurora-surface,
  .dark .group:focus-within .aurora-surface { opacity: .70; filter: blur(22px); }

  /* 4) Garantia extra de legibilidade no LIGHT quando houver hover */
  .group:hover h1, .group:hover h2, .group:hover h3,
  .group:hover .meta, .group:hover .excerpt {
    color: var(--foreground);
  }
}
@layer utilities {
  /* no tema CLARO o título nunca vira gradiente */
  html:not(.dark) .group:hover h1,
  html:not(.dark) .group:hover h2,
  html:not(.dark) .group:hover h3 {
    color: var(--foreground) !important;
    background: none !important;
    -webkit-text-fill-color: currentColor !important;
  }
}
